# ------------------------------------------------------------------------------
# Workflow: YML & MD Linter
# Purpose:
#       Lint all YAML and Markdown files in PRs and main branch
#
# Trigger:
#       On every pull request and merged to main branch
#
# Notes:
#       Lint checks all YAML and Markdown files.
# ------------------------------------------------------------------------------
name: Linting

on:
  workflow_call: {}

jobs:
  lint-yaml:
    name: YAML Lint
    runs-on: ubuntu-latest
    steps:
      # ---------------------------
      # Checkout the repository
      # ---------------------------
      - name: Checkout repo
        uses: actions/checkout@v4

      # ---------------------------
      # YAML lint using a custom config (.yamllint.yml)
      # ---------------------------
      - name: Lint YAML files
        uses: ibiqlik/action-yamllint@v3
        with:
          config_file: .yamllint.yml

  lint-markdown:
    name: Markdown Lint
    runs-on: ubuntu-latest
    continue-on-error: true  # Warnings don't block PRs
    steps:
      # ---------------------------
      # Checkout the repository
      # ---------------------------
      - name: Checkout repo
        uses: actions/checkout@v4

      # ---------------------------
      # Markdown lint using a custom JSON config
      # Custom Rules:
      #   - MD013 (line length): set to 120 for readability
      #   - MD033 (inline HTML): disabled
      #   - MD041 (first line heading): disabled
      # ---------------------------
      - name: Lint Markdown files
        uses: avto-dev/markdown-lint@v1
        with:
          config: .markdownlint.jsonc